{"ast":null,"code":"import _classCallCheck from\"C:/Users/maxim/PycharmProjects/todoApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/maxim/PycharmProjects/todoApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/maxim/PycharmProjects/todoApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/maxim/PycharmProjects/todoApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Modal from\"./components/Modal\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";axios.defaults.xsrfHeaderName=\"X-CSRFTOKEN\";axios.defaults.xsrfCookieName=\"csrftoken\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.refreshList=function(){axios.get(\"/api/todos/\").then(function(res){return _this.setState({todoList:res.data});}).catch(function(err){return console.log(err);});};_this.toggle=function(){_this.setState({modal:!_this.state.modal});};_this.handleSubmit=function(item){_this.toggle();if(item.id){axios.put(\"/api/todos/\".concat(item.id,\"/\"),item).then(function(res){return _this.refreshList();});return;}axios.post(\"/api/todos/\",item).then(function(res){return _this.refreshList();});};_this.handleDelete=function(item){axios.delete(\"/api/todos/\".concat(item.id,\"/\")).then(function(res){return _this.refreshList();});};_this.createItem=function(){var item={title:\"\",description:\"\",completed:false};_this.setState({activeItem:item,modal:!_this.state.modal});};_this.editItem=function(item){_this.setState({activeItem:item,modal:!_this.state.modal});};_this.displayCompleted=function(status){if(status){return _this.setState({viewCompleted:true});}return _this.setState({viewCompleted:false});};_this.renderTabList=function(){return/*#__PURE__*/_jsxs(\"div\",{className:\"nav nav-tabs\",children:[/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return _this.displayCompleted(true);},className:_this.state.viewCompleted?\"nav-link active\":\"nav-link\",children:\"Complete\"}),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return _this.displayCompleted(false);},className:_this.state.viewCompleted?\"nav-link\":\"nav-link active\",children:\"Incomplete\"})]});};_this.renderItems=function(){var viewCompleted=_this.state.viewCompleted;var newItems=_this.state.todoList.filter(function(item){return item.completed===viewCompleted;});return newItems.map(function(item){return/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"todo-title mr-2 \".concat(_this.state.viewCompleted?\"completed-todo\":\"\"),title:item.task,children:item.task}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary mr-2\",onClick:function onClick(){return _this.editItem(item);},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:function onClick(){return _this.handleDelete(item);},children:\"Delete\"})]})]},item.id);});};_this.state={viewCompleted:false,todoList:[],modal:false,activeItem:{title:\"\",description:\"\",completed:false}};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){this.refreshList();}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"main\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-black text-uppercase text-center my-4\",children:\"Todo app\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 col-sm-10 mx-auto p-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card p-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:this.createItem,children:\"Add task\"})}),this.renderTabList(),/*#__PURE__*/_jsx(\"ul\",{className:\"list-group list-group-flush border-top-0\",children:this.renderItems()})]})})}),this.state.modal?/*#__PURE__*/_jsx(Modal,{activeItem:this.state.activeItem,toggle:this.toggle,onSave:this.handleSubmit}):null]});}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["C:/Users/maxim/PycharmProjects/todoApp/frontend/src/App.js"],"names":["React","Component","Modal","axios","defaults","xsrfHeaderName","xsrfCookieName","App","props","refreshList","get","then","res","setState","todoList","data","catch","err","console","log","toggle","modal","state","handleSubmit","item","id","put","post","handleDelete","delete","createItem","title","description","completed","activeItem","editItem","displayCompleted","status","viewCompleted","renderTabList","renderItems","newItems","filter","map","task"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Modal from \"./components/Modal\";\nimport axios from \"axios\";\naxios.defaults.xsrfHeaderName = \"X-CSRFTOKEN\";\naxios.defaults.xsrfCookieName = \"csrftoken\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      viewCompleted: false,\n      todoList: [],\n      modal: false,\n      activeItem: {\n        title: \"\",\n        description: \"\",\n        completed: false,\n      },\n    };\n  }\n\n  componentDidMount() {\n    this.refreshList();\n  }\n\n  refreshList = () => {\n    axios\n      .get(\"/api/todos/\")\n      .then((res) => this.setState({ todoList: res.data }))\n      .catch((err) => console.log(err));\n  };\n\n  toggle = () => {\n    this.setState({ modal: !this.state.modal });\n  };\n\n  handleSubmit = (item) => {\n    this.toggle();\n\n    if (item.id) {\n      axios\n        .put(`/api/todos/${item.id}/`, item)\n        .then((res) => this.refreshList());\n      return;\n    }\n    axios\n      .post(\"/api/todos/\", item)\n      .then((res) => this.refreshList());\n  };\n\n  handleDelete = (item) => {\n    axios\n      .delete(`/api/todos/${item.id}/`)\n      .then((res) => this.refreshList());\n  };\n\n  createItem = () => {\n    const item = { title: \"\", description: \"\", completed: false };\n\n    this.setState({ activeItem: item, modal: !this.state.modal });\n  };\n\n  editItem = (item) => {\n    this.setState({ activeItem: item, modal: !this.state.modal });\n  };\n\n  displayCompleted = (status) => {\n    if (status) {\n      return this.setState({ viewCompleted: true });\n    }\n\n    return this.setState({ viewCompleted: false });\n  };\n\n  renderTabList = () => {\n    return (\n      <div className=\"nav nav-tabs\">\n        <span\n          onClick={() => this.displayCompleted(true)}\n          className={this.state.viewCompleted ? \"nav-link active\" : \"nav-link\"}\n        >\n          Complete\n        </span>\n        <span\n          onClick={() => this.displayCompleted(false)}\n          className={this.state.viewCompleted ? \"nav-link\" : \"nav-link active\"}\n        >\n          Incomplete\n        </span>\n      </div>\n    );\n  };\n\n  renderItems = () => {\n    const { viewCompleted } = this.state;\n    const newItems = this.state.todoList.filter(\n      (item) => item.completed === viewCompleted\n    );\n\n    return newItems.map((item) => (\n      <li\n        key={item.id}\n        className=\"list-group-item d-flex justify-content-between align-items-center\"\n      >\n        <span\n          className={`todo-title mr-2 ${\n            this.state.viewCompleted ? \"completed-todo\" : \"\"\n          }`}\n          title={item.task}\n        >\n          {item.task}\n        </span>\n        <span>\n          <button\n            className=\"btn btn-secondary mr-2\"\n            onClick={() => this.editItem(item)}\n          >\n            Edit\n          </button>\n          <button\n            className=\"btn btn-danger\"\n            onClick={() => this.handleDelete(item)}\n          >\n            Delete\n          </button>\n        </span>\n      </li>\n    ));\n  };\n\n  render() {\n    return (\n      <main className=\"container\">\n        <h1 className=\"text-black text-uppercase text-center my-4\">Todo app</h1>\n        <div className=\"row\">\n          <div className=\"col-md-6 col-sm-10 mx-auto p-0\">\n            <div className=\"card p-3\">\n              <div className=\"mb-4\">\n                <button\n                  className=\"btn btn-primary\"\n                  onClick={this.createItem}\n                >\n                  Add task\n                </button>\n              </div>\n              {this.renderTabList()}\n              <ul className=\"list-group list-group-flush border-top-0\">\n                {this.renderItems()}\n              </ul>\n            </div>\n          </div>\n        </div>\n        {this.state.modal ? (\n          <Modal\n            activeItem={this.state.activeItem}\n            toggle={this.toggle}\n            onSave={this.handleSubmit}\n          />\n        ) : null}\n      </main>\n    );\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}